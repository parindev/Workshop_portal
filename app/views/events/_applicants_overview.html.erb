<h3><%= t('.title', title: @event.name) %></h3>
<div id="free_places"><%= t '.free_places', count: @free_places %></div>
<div id="occupied_places"><%= t '.occupied_places', count: @occupied_places %></div>

<table id="applicants" class="table table-striped">
  <thead>
  <tr>
    <th><%= Profile.human_attribute_name(:name) %></th>
    <th><%= Profile.human_attribute_name(:gender) %></th>
    <th><%= Profile.human_attribute_name(:age) %></th>
    <th>
      <%= t '.participations' %> <br>
      <%= t '.accepted_rejected' %>
    </th>
    <th><%= t '.status' %></th>
  </tr>
  </thead>
  <tbody>
  <% @event.application_letters.each do | application_letter | %>
      <tr>
        <td><%= application_letter.user.profile.name %></td>
        <td><%= application_letter.user.profile.gender %></td>
        <td><%= application_letter.user.profile.age  %></td>
        <td><%= application_letter.user.accepted_applications_count(@event) %> / <%= application_letter.user.rejected_applications_count(@event) %></td>
        <td>
          Radio Buttons (#45 US_3.11: Mark as accepted/rejected)
          <%= link_to t('.details'), application_letter_path(application_letter), :class => 'btn btn-default' %>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>

<!-- TODO for Implementers of Button Functionality: Write view tests for buttons -->
<%= link_to "Alle annehmen (#16 US_3.1 Accept-All-Button)",
            events_path, :class => 'btn btn-default'%>

<%= link_to "Alle drucken (#30 US_3.7 Print all at once)",
            events_path, :class => 'btn btn-default'%>
<%= button_tag "Zusagen verschicken", type: 'button', class: 'btn btn-default', data: {toggle: 'modal', target: '#send-emails-modal', header: 'Zusagen verschicken', list: 'zusage1@hpi.de,zusage2@hpi.de,zusage3@hpi.de'}, disabled: !@event.applicationsClassified? || @event.compute_free_places < 0 %>

<%= button_tag "Absagen verschicken", type: 'button', class: 'btn btn-default', data: {toggle: 'modal', target: '#send-emails-modal', header: 'Absagen verschicken', list: 'absage1@hpi.de,absage2@hpi.de,absage3@hpi.de'}, disabled: !@event.applicationsClassified? || @event.compute_free_places < 0 %>

<!-- Bootstrap Modal for sending emails -->
<div id="send-emails-modal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Emails verschicken</h4>
      </div>
      <div class="modal-body">
        <%= link_to "Senden", '#', :id => 'send-emails-mailto', :class => 'btn btn-default' %>
        <%= button_tag "In die Zwischenablage kopieren", type: 'button', id: 'send-emails-clipboard', class: 'btn btn-default' %>
        <%= text_field_tag "send-emails-list", '', :type => 'hidden' %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>